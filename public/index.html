<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered Android App Creator</title>
</head>
<body class="light-mode">
    <div class="container">
        <div class="instructions glassmorphism">
            <h1>Build your own Android app with the power of AI</h1>
            <p>
                Simply input a request below and we will paint the black canvas on the right with your request. 
                When you need to reset press the button below the canvas on the left. 
                When you are ready to export your very own Android app click the export to APK button on the right.
            </p>
            <button id="nightModeToggle" onclick="toggleNightMode()" aria-label="Toggle night mode">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-16v2h2V4h-2zm0 14v2h2v-2h-2zm8-7h2v-2h-2v2zm-14 0h2v-2H5v2zm10.07-8.07l1.41-1.41-1.41-1.41-1.41 1.41 1.41 1.41zM7.05 19.07l1.41-1.41-1.41-1.41-1.41 1.41 1.41 1.41zM19.07 16.95l1.41 1.41 1.41-1.41-1.41-1.41-1.41 1.41zM4.93 4.93L3.52 3.52 2.1 4.93 3.52 6.34 4.93 4.93z"/>
                </svg>
            </button>
        </div>
        <div class="main-content">
            <div class="chat-area glassmorphism">
                <div class="chat-messages" id="chatMessages">
                    <!-- Chat messages will be added here dynamically -->
                </div>
                <div class="chat-input">
                    <input type="text" id="userInput" placeholder="Type your request here...">
                    <button onclick="sendMessage()">Send</button>
                </div>
                <button id="resetButton" onclick="resetCanvas()">Reset Canvas</button>
            </div>
            <div class="phone-preview glassmorphism">
                <div class="phone-screen">
                    <img id="appPreview" src="https://via.placeholder.com/260x460" alt="Android App Preview">
                </div>
                <button id="exportButton" onclick="exportToAPK()">Export to APK</button>
                <a href="install_apk.html" target="_blank">How to install APK</a>
            </div>
        </div>
    </div>

    <script>
        function addMessage(text, isUser) {
            const chatMessages = document.getElementById('chatMessages');
            const messageElement = document.createElement('div');
            messageElement.textContent = text;
            messageElement.classList.add('message');
            messageElement.classList.add(isUser ? 'user' : 'bot');
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            if (message) {
                addMessage(message, true);
                input.value = '';
                
                // Simulate AI response (replace with actual AI integration)
                setTimeout(() => {
                    addMessage("I'm processing your request for an Android app. The preview will update shortly.", false);
                    // Simulate updating the app preview (replace with actual preview generation)
                    document.getElementById('appPreview').src = "https://cdn.mos.cms.futurecdn.net/Xj58EYWQAj93cby2KK6xNY.png";
                }, 1000);
            }
        }

        function resetCanvas() {
            document.getElementById('appPreview').src = "https://via.placeholder.com/260x460";
            addMessage("Canvas has been reset. You can start a new app design.", false);
        }

        function exportToAPK() {
            // Placeholder for APK export functionality
            addMessage("Exporting to APK. Please wait...", false);
        }

        function toggleNightMode() {
            document.body.classList.toggle('dark-mode');
            document.body.classList.toggle('light-mode');
            const nightModeToggle = document.getElementById('nightModeToggle');
            if (document.body.classList.contains('dark-mode')) {
                nightModeToggle.setAttribute('aria-label', 'Toggle day mode');
            } else {
                nightModeToggle.setAttribute('aria-label', 'Toggle night mode');
            }
        }

        // Add event listener for Enter key
        document.getElementById('userInput').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
